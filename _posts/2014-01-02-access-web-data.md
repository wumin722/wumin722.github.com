---
layout: post
title: 网页数据获取的方法
summary: 这两天一直在找数据，已疲惫不堪。现代社会数据很多，但很难有现成数据供你下载。最近找数据有些感悟，也就写下来了
categories: [IT]
tags: [IT]
publish: true
---
                     
# {{ page.title }} #
{{ page.summary }}
******
这两天一直在找数据，已疲惫不堪。现代社会数据很多，但很难有现成数据供你下载。对此，最好的办法就是找网页上的数据了。学计算机的人可能随便一个爬虫就扒下来了，可我是业余——具体点是学统计的。所以在这总结了几个业余的方法

* first 对于表格数据，直接选中复制粘贴不就得了，当然也不是所有的都行。那就轮到第二个方法了

*  用R中的XML包。XML可以用xpath解析XML树，所以对于很多html文件也同样有效。对于表格，一个readHTMLTable()搞定。令人郁闷的是，绝大部分html文件可没那么规范。以前逛统计之都，看到有人说XML包不行了，就直接上正则表达式就行。个人认为很麻烦（大部分时候）毕竟不可能每类数据都有唯一标识。

*  这样用R就不方便了（要知道他的专业是统计）， 用ruby。用ruby的原因很简单，因为他也是R开头， 跟R一样是脚本语言。况且用它的人比用python的人少，适合装。扯远了，包nokogirio（一看就是日本人的作品，谁叫ruby老爸是日本的呢）提供的css选择器差不多是指哪打哪了。当然如果要自己指的话，那也麻烦了（有些网页长的令人头昏脑涨）。直接选中要的字符或数据，右键——审查元素，chrome或者firefox的控制台就给你提供了css路径。

*  稍微特殊一点的是，数据在不同网页， 通过URL检索查询。这就可以循环URL（一般是改变后面附的参数（例http://www.baidu.com/baidu?wd=we）wd表示的就是查询参数， we就是我要查的值）获取每个网页，再按上面的方法取数。

*  在特殊一点，就是用很多js函数生成的数据。在html原文件中看不到数据。那就惨了，我是不知道怎么办了。一般就要认真看js代码，看哪个函数提供数据。在浏览器控制台中慢慢试。如果发现是表单提交的，还是好办的。关键是URL要对。参数可以用hash表的形式。Net::HTTP.post_form（URL， ‘argv1’ => 'xx',  'arg2' => 'xx'）。参数如果不清楚， 可以多调试JS中的函数。查看控制台的network，这里对每个请求都有描述。说到这自己都不清楚了，毕竟是业余（js是今天看的简介）

